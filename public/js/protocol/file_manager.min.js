(()=>{function e(){var e=document.getElementById("protocol_files").getElementsByClassName("form-section")[0].getElementsByClassName("form-group")[0],t=document.createElement("label");t.htmlFor="file",t.className="custom-label",e.appendChild(t);var l=document.createElement("div");l.className="flex",t.appendChild(l);var a=document.createElement("input");a.type="file",a.name="file[]",a.placeholder="Select File",a.className="block mt-1",l.appendChild(a);var n=document.createElement("i");n.className="tempFile custom-delete-2 fas fa-times fa-lg",n.title="Click to delete",l.appendChild(n),$(".tempFile").off("click").click((function(){this.parentElement.parentElement.remove()}))}$(document).ready((function(){var t=document.getElementById("addFileButton");null!==t&&t.addEventListener("click",e);var l=$("#deleteFileModal"),n=l.find(".modal-close");0!==n.length&&n.click(a);var s=l.find(".modal-cancel");0!==s.length&&s.click(a)}));var t=document.getElementById("deleteFileModal"),l=$(".uploaded-file");function a(){t.classList.add("hidden")}function n(){var e=t.getElementsByClassName("delete-message")[0];e.classList.contains("hidden")||e.classList.add("hidden")}0!==l.length&&l.off("click").click((function(){var e,l,a,n;e=this,l=String(e.getAttribute("data-protocol")),a=String(e.getAttribute("data-file")),n=e.parentElement.getElementsByClassName("download-file")[0].lastChild.nodeValue.trim(),t.getElementsByClassName("delete-message")[0].classList.remove("hidden"),t.getElementsByClassName("modal-message")[0].innerHTML='File: <span class="text-indigo-700">'+n+"</span>",t.getElementsByClassName("modal-submit")[0].setAttribute("onclick","deleteFileAjax("+l+","+a+")"),t.classList.remove("hidden")})),deleteFileAjax=function(e,l,a){var s=t.getElementsByClassName("modal-message")[0],i=$('meta[name="csrf-token"]').attr("content");$.ajaxSetup({headers:{"X-CSRF-TOKEN":i}}),$.ajax({url:window.location.origin+"/deletefile/"+e+"/"+l,method:"post",dataType:"json",data:{protocol_id:e,file_id:l}}).done((function(t){n(),t.success?(s.innerHTML='<p class="text-green-500">'+t.message+"</p>",function(e,t){var l=$(".uploaded-file[data-file='"+t+"'][data-protocol='"+e+"']")[0];void 0!==l&&l.parentElement.remove()}(e,l)):t.error&&(s.innerHTML='<p class="text-red-500">'+t.message+"</p>")})).fail((function(e){n(),s.innerHTML='<p class="text-red-500">'+e.statusText+"</p>",s.innerHTML+="<p>"+e.responseText+"</p>"}))}})();